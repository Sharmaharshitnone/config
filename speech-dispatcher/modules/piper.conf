# # The piper output module is based on the generic plugin for Speech Dispatcher.
# # This configuration uses piper-tts for synthesis with pw-play for audio output.
#
# Debug 0
#
# # GenericExecuteSynth: Command to synthesize text to speech
# # Variables available: $DATA (text), $VOICE, $RATE, $PITCH, $LANGUAGE
# GenericExecuteSynth "printf %s \'$DATA\' | piper-tts --model /home/kali/.local/share/piper-voices/en_US-lessac-medium.onnx --output_raw | pw-play --rate=22050 --channels=1 --format=s16le -"
#
# GenericCmdDependency "piper-tts"
# GenericCmdDependency "pw-play"
#
# GenericSoundIconFolder "/usr/share/sounds/sound-icons/"
#
# # CRITICAL: Must define at least one voice for the module to load
# AddVoice        "en"    "FEMALE1"       "en_US-lessac-medium"
# AddVoice        "en_US" "FEMALE1"       "en_US-lessac-medium"
#
# DefaultVoice    "en_US-lessac-medium"

AddVoice "en" "MALE1" "en_US-lessac-medium"
Debug 0

# UNIVERSAL LINUX CONFIG (ALSA)
# Replaced 'pw-play' with 'aplay' to fix "Format not recognised" error.
# -r 22050: Sample rate (matches Medium quality)
# -f S16_LE: Format (16-bit)
# -t raw: Raw data type (no header)

GenericExecuteSynth "echo '$DATA' | piper-tts --model $HOME/.local/share/piper-voices/en_US-lessac-medium.onnx --output_raw | aplay -r 22050 -f S16_LE -t raw -"

GenericCmdDependency "piper-tts"
GenericCmdDependency "aplay"
