# ==============================================================================
# MPD CONFIGURATION - USER MODE
# Context: Arch Linux | PipeWire | Cava Visualizer
# ==============================================================================

# --- Files and Directories ---
music_directory         "~/Music"
playlist_directory      "~/.local/share/mpd/playlists"
db_file                 "~/.local/share/mpd/database"
log_file                "syslog"
pid_file                "~/.local/share/mpd/pid"
state_file              "~/.local/share/mpd/state"
sticker_file            "~/.local/share/mpd/sticker.sql"

# --- Network & Inputs ---
# Bind to localhost for network clients
bind_to_address         "127.0.0.1"
port                    "6600"

# Bind to Unix Socket (Faster for local clients like ncmpcpp/rmpc)
bind_to_address         "~/.local/share/mpd/socket"

# Auto-update database when files change
auto_update             "yes"
auto_update_depth       "3"

# --- Audio Outputs ---

# 1. Main Audio Output (PipeWire)
audio_output {
    type            "pipewire"
    name            "PipeWire Sound Server"
}

# 2. Visualizer Output (FIFO for Cava)
audio_output {
    type            "fifo"
    name            "my_fifo"
    path            "/tmp/mpd.fifo"
    format          "44100:16:2"
}

# --- Protocol & Buffers ---
restore_paused          "yes"
max_output_buffer_size  "16384"

# --- Client Limits ---
max_connections         "20"
