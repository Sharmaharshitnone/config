# i3status-rs configuration file
icons_format = "<span size='large'>{icon}</span>"
[theme]
# theme = "ctp-mocha"
theme = "gruvbox-dark"
overrides = { idle_bg = "none", idle_fg = "#ebdbb2", info_bg = "none", info_fg = "#83a598", good_bg = "none", good_fg = "#b8bb26", warning_bg = "none", warning_fg = "#fabd2f", critical_bg = "none", critical_fg = "#fb4934", separator = "  ", separator_bg = "none", separator_fg = "none" } 

[icons]
icons = "material-nf"

# 11b. DATE
[[block]]
block = "time"
format = "<span weight='bold' size='large'>ï‘•</span> <span rise='1000'>$timestamp.datetime(f:'%a %d %b')</span>"
interval = 60
[[block.click]]
button = "left"
cmd = "tmux select-window -t scratchpad:calcurse 2>/dev/null || tmux new-window -t scratchpad -n calcurse calcurse; i3-msg scratchpad show"
[[block.click]]
button = "right"
cmd = "tmux select-window -t scratchpad:vit 2>/dev/null || tmux new-window -t scratchpad -n vit vit; i3-msg scratchpad show"

# 11. TIME
[[block]]
block = "time"
interval = 60
format = "<span size='large' weight='bold' >$icon</span> <span rise='1000'>$timestamp.datetime(f:'%I:%M %p')</span>"
[block.theme_overrides]
[[block.click]]
button = "left"
cmd = "tmux select-window -t scratchpad:peaclock 2>/dev/null || tmux new-window -t scratchpad -n peaclock peaclock; i3-msg scratchpad show"

# 2b. UPTIME
[[block]]
block = "uptime"
interval = 60
format = "<span weight='bold' size='large'>UP:</span><span rise='1000'>$text</span>"

# 3. CPU
[[block]]
block = "cpu"
interval = 1
format = "<span size='large'>ï’¼</span> <span rise='1000'>$utilization $frequency</span>"
[block.theme_overrides]
[[block.click]]
button = "left"
cmd = "tmux select-window -t scratchpad:btop 2>/dev/null || tmux new-window -t scratchpad -n btop btop; i3-msg scratchpad show"
[[block.click]]
button = "right"
cmd = "tmux select-window -t scratchpad:htop 2>/dev/null || tmux new-window -t scratchpad -n htop htop; i3-msg scratchpad show"

# 5. MEMORY
[[block]]
block = "memory"
format = "<span size='large'>î¿…</span> <span rise='1000'> $mem_used_percents</span>"
format_alt = "<span size='large'>î¿…</span> <span rise='1000'> $mem_used / $mem_total </span>"
interval = 5
warning_mem = 80
critical_mem = 95
[block.theme_overrides]

# 7. VOLUME (Speaker)
[[block]]
block = "sound"
driver = "pulseaudio"
format = "<span weight='bold' size='x-large'>$icon</span> <span rise='1000'>$volume</span>"
show_volume_when_muted = true
[[block.click]]
button = "left"
cmd = "i3-msg exec pavucontrol"
[[block.click]]
button = "right"
action = "toggle_mute"

# 8. MIC (Microphone)
[[block]]
block = "sound"
driver = "pulseaudio"
device_kind = "source"
format = "<span weight='bold' size='x-large'>$icon</span> <span rise='1000'>$volume</span>"
show_volume_when_muted = true
[[block.click]]
button = "left"
cmd = "pavucontrol"
[[block.click]]
button = "right"
action = "toggle_mute"

# 5b. BACKLIGHT (Brightness)
[[block]]
block = "backlight"
cycle = [10, 30, 60, 100]  # Left-click to jump between levels
format = "<span size='large'>$icon</span> <span rise='1000'>$brightness</span>"
missing_format = ""
[block.theme_overrides]

# 9. TIMER (Stopwatch)
[[block]]
block = "custom"
command = "~/.config/i3/scripts/timer_control.sh read"
interval = 1
signal = 11
json = true
[[block.click]]
button = "left"
cmd = "~/.config/i3/scripts/timer_control.sh toggle && pkill -RTMIN+11 i3status-rs" 
[[block.click]]
button = "right"
cmd = "~/.config/i3/scripts/timer_control.sh reset && pkill -RTMIN+11 i3status-rs" 
update = true

# 5d. MUSIC
[[block]]
block = "music"
format = "$icon {$combo.str(max_w:25,rot_interval:0.5) $play|}"

[[block.click]]
button = "left"
action = "play_pause"
[[block.click]]
button = "right"
action = "next"
[[block.click]]
button = "middle"
action = "prev"

[[block]]
block = "custom"
command = "cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor | sed -e 's/performance/âš¡ Perf/' -e 's/powersave/ðŸŒ± Save/'"
interval = "once"
signal = 12
format = "$text"
[[block.click]]
button = "left"
cmd = "~/.config/i3/scripts/power-control.sh performance && pkill -RTMIN+12 i3status-rs"
[[block.click]]
button = "right"
cmd = "~/.config/i3/scripts/power-control.sh powersave && pkill -RTMIN+12 i3status-rs"
[[block.click]]
button = "middle"
cmd = "~/.config/i3/scripts/power-control.sh reset && pkill -RTMIN+12 i3status-rs"

# 6. BATTERY

[[block]]
block = "battery"
format = "$icon $percentage {$time|} {$power|}"
interval = 5
warning = 30
critical = 15

# 4. TEMPERATURE
[[block]]
block = "temperature"
format = "<span size='large'></span>ï‹‰<span rise='1000'> $average</span>"
interval = 5
chip = "*-isa-*"
#chip = "coretemp-isa-*"
[block.theme_overrides]

# 5c. REDSHIFT
[[block]]
block = "custom"
# command = "echo 'ïƒ«'"
command = "~/.config/i3/scripts/redshift-status.sh"
signal = 10
interval = "once"
format = "<span size='large'>$text</span>"
[[block.click]]
button = "left"
cmd = "~/.config/i3/scripts/toggle-redshift.sh"

# 7a. PICOM TOGGLE
[[block]]
block = "custom"
command = "pgrep -x picom >/dev/null && echo 'ïˆ…' || echo 'ïˆ„'"
format = "<span size='large'>$text</span>"
interval = "once"
signal = 13
[[block.click]]
button = "left"
cmd = "~/.config/i3/scripts/picom-toggle.sh && pkill -RTMIN+13 i3status-rs"

# 8. BACKGROUND
[[block]]
block = "custom"
command = "echo 'ï€¾'"
format = "<span size='large'>$text</span>"
# interval = once
[[block.click]]
button = "left"
cmd = "~/.config/i3/scripts/bg.sh"

# 6b. warp vpn
[[block]]
block = "custom"
command = """
    if warp-cli status 2>/dev/null | grep -qi 'connected'; then
        echo 'ï…¯'
    else
        echo 'ï’­'
    fi
"""
format = "<span size='x-large'>$text</span>"
interval = 5
[[block.click]]
button = "left"
cmd = "kitty -e zsh -ic warp"
