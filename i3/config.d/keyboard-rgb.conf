# Keyboard RGB backlight
# $mod+backslash = mode, $mod+F9 = cycle, $mod+Shift+F9 = off
set $kb /home/akanksha/config/bin/kb-rgb

# ── Default OFF at login ──
exec --no-startup-id sudo $kb off

bindsym $mod+backslash mode "kb-rgb"
mode "kb-rgb" {
    # ── Gruvbox presets (Shift+key) ──
    bindsym Shift+r exec --no-startup-id sudo $kb preset gruvbox-red, mode "default"
    bindsym Shift+g exec --no-startup-id sudo $kb preset gruvbox-green, mode "default"
    bindsym Shift+y exec --no-startup-id sudo $kb preset gruvbox-yellow, mode "default"
    bindsym Shift+b exec --no-startup-id sudo $kb preset gruvbox-blue, mode "default"
    bindsym Shift+p exec --no-startup-id sudo $kb preset gruvbox-purple, mode "default"
    bindsym Shift+a exec --no-startup-id sudo $kb preset gruvbox-aqua, mode "default"
    bindsym Shift+o exec --no-startup-id sudo $kb preset gruvbox-orange, mode "default"
    bindsym Shift+f exec --no-startup-id sudo $kb preset gruvbox-fg, mode "default"

    # ── Pure color presets ──
    bindsym r exec --no-startup-id sudo $kb preset red, mode "default"
    bindsym g exec --no-startup-id sudo $kb preset green, mode "default"
    bindsym b exec --no-startup-id sudo $kb preset blue, mode "default"
    bindsym w exec --no-startup-id sudo $kb preset white, mode "default"
    bindsym c exec --no-startup-id sudo $kb preset cyan, mode "default"
    bindsym m exec --no-startup-id sudo $kb preset magenta, mode "default"
    bindsym y exec --no-startup-id sudo $kb preset yellow, mode "default"
    bindsym o exec --no-startup-id sudo $kb preset orange, mode "default"
    bindsym p exec --no-startup-id sudo $kb preset purple, mode "default"
    bindsym i exec --no-startup-id sudo $kb preset ice, mode "default"
    bindsym h exec --no-startup-id sudo $kb preset hacker, mode "default"

    # ── Brightness ──
    bindsym Up exec --no-startup-id sudo $kb brightness 100
    bindsym Down exec --no-startup-id sudo $kb brightness 50

    # ── Power ──
    bindsym 0 exec --no-startup-id sudo $kb off, mode "default"
    bindsym 1 exec --no-startup-id sudo $kb on, mode "default"

    # ── Effects (e = submenu) ──
    bindsym e mode "kb-fx"

    # ── Color picker ──
    bindsym d exec --no-startup-id sudo $kb pick, mode "default"
    bindsym space exec --no-startup-id sudo $kb cycle

    # ── Notification glow ──
    bindsym n exec --no-startup-id sudo $kb glow-toggle, mode "default"

    # ── Exit mode ──
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# ── Effects sub-mode ──
mode "kb-fx" {
    # All effects: press key to start, Shift+key for speed 8 (fast)
    bindsym b exec --no-startup-id sudo $kb breathe "" 5, mode "default"
    bindsym Shift+b exec --no-startup-id sudo $kb breathe "" 8, mode "default"
    bindsym w exec --no-startup-id sudo $kb wave ea6962 7daea3 5, mode "default"
    bindsym Shift+w exec --no-startup-id sudo $kb wave ea6962 7daea3 8, mode "default"
    bindsym s exec --no-startup-id sudo $kb strobe FFFFFF 5, mode "default"
    bindsym Shift+s exec --no-startup-id sudo $kb strobe FFFFFF 8, mode "default"
    bindsym c exec --no-startup-id sudo $kb candle 5, mode "default"
    bindsym Shift+c exec --no-startup-id sudo $kb candle 8, mode "default"
    bindsym p exec --no-startup-id sudo $kb pulse ea6962 5, mode "default"
    bindsym o exec --no-startup-id sudo $kb police 5, mode "default"
    bindsym Shift+o exec --no-startup-id sudo $kb police 8, mode "default"
    bindsym d exec --no-startup-id sudo $kb disco 5, mode "default"
    bindsym Shift+d exec --no-startup-id sudo $kb disco 8, mode "default"
    bindsym h exec --no-startup-id sudo $kb heartbeat ea6962 5, mode "default"
    bindsym Shift+h exec --no-startup-id sudo $kb heartbeat ea6962 8, mode "default"

    # ── Stop any effect ──
    bindsym q exec --no-startup-id sudo $kb stop, mode "default"
    bindsym 0 exec --no-startup-id sudo $kb stop, mode "default"

    # ── Back / Exit ──
    bindsym BackSpace mode "kb-rgb"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# ── Quick binds (no mode needed) ──
bindsym $mod+F9 exec --no-startup-id sudo $kb cycle
bindsym $mod+Shift+F9 exec --no-startup-id sudo $kb off
