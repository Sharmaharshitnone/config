# ── Tiling Mode Control ───────────────────────────────────────
# Cycle: alternating → vertical → horizontal → alternating
# State written to $XDG_RUNTIME_DIR/i3-tiling-mode for status bar integration
#
# $mod+t         → cycle to next tiling mode
# $mod+Shift+t   → open mode selector

set $i3helper ~/.config/i3/scripts/i3-helper/target/release/i3-helper

bindsym $mod+t exec --no-startup-id pkill -SIGUSR1 -x i3-helper

bindsym $mod+Shift+t mode "$tiling_mode"

mode "$tiling_mode" {
    # Set tiling mode explicitly
    bindsym a exec --no-startup-id "$i3helper --set-mode alternating"; mode "default"
    bindsym v exec --no-startup-id "$i3helper --set-mode vertical"; mode "default"
    bindsym h exec --no-startup-id "$i3helper --set-mode horizontal"; mode "default"

    # Manual split overrides (always available regardless of mode)
    bindsym s split v; mode "default"
    bindsym d split h; mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
