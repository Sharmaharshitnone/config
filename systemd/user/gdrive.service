[Unit]
Description=Rclone Mount for Google Drive
After=network-online.target
Wants=network-online.target

[Service]
Type=notify
ExecStartPre=/usr/bin/mkdir -p %h/gdrive
ExecStart=/usr/bin/rclone mount gdrive: %h/gdrive \
    --config=%h/.config/rclone/rclone.conf \
    --vfs-cache-mode full \
    --allow-non-empty

ExecStop=/usr/bin/fusermount -u %h/gdrive

Restart=on-failure
RestartSec=10
StartLimitInterval=60
StartLimitBurst=3

[Install]
WantedBy=default.target
